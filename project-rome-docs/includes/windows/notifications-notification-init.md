---
ms.openlocfilehash: f81fbbffb2ec54f8d9a252a00fc3822f1f3f9582
ms.sourcegitcommit: e95423df0e4427377ab74dbd12b0056233181d32
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/14/2019
ms.locfileid: "59800854"
---
### <a name="associate-the-connected-devices-platform-with-the-native-push-notification-for-each-platform"></a><span data-ttu-id="ea998-101">Connected Devices Platform を各プラットフォームのネイティブのプッシュ通知に関連付けます。</span><span class="sxs-lookup"><span data-stu-id="ea998-101">Associate the Connected Devices Platform with the native push notification for each platform.</span></span> 

<span data-ttu-id="ea998-102">既に触れたように、アプリ クライアントは、登録プロセスの間、各プラットフォームで使用されているネイティブのプッシュ通知パイプラインに関する情報を、クライアント側 SDK と Connected Devices Platform に提供する必要があります。これは、ユーザーをターゲットにした通知をアプリ サーバーが MS Graph API を使って発行したときに、Graph の通知サービスが個々のアプリ クライアント エンドポイントに通知を拡散できるようにするためです。</span><span class="sxs-lookup"><span data-stu-id="ea998-102">Like previously mentioned, the app clients need to provide knowledge about the native push notification pipeline being used for each platform to the client-side SDK and the Connected Devices Platform during the registration process, in order to allow Graph notification service to fan-out notifications to each app client endpoint when your app server publishes a user-targeting notification via MS Graph APIs.</span></span>
<span data-ttu-id="ea998-103">上記の手順では、**NotificationProvider** パラメーターなしでプラットフォームを初期化しました。</span><span class="sxs-lookup"><span data-stu-id="ea998-103">In the steps above, you initialized the Platform without **NotificationProvider** parameter.</span></span> <span data-ttu-id="ea998-104">ここでは、**NotificationProvider** を実装するオブジェクトを作成して渡す必要があります。</span><span class="sxs-lookup"><span data-stu-id="ea998-104">Here, you need to construct and pass in an object that implements **NotificationProvider**.</span></span> <span data-ttu-id="ea998-105">詳細については、サンプルの **GraphNotificationProvider.cs** を参照してください。</span><span class="sxs-lookup"><span data-stu-id="ea998-105">Please see **GraphNotificationProvider.cs** from sample for details.</span></span> 



<span data-ttu-id="ea998-106">**NotificationProvider** の実装でこの登録を配信します。</span><span class="sxs-lookup"><span data-stu-id="ea998-106">Deliver this registration in your implementation of **NotificationProvider**.</span></span> <span data-ttu-id="ea998-107">次に、**Platform** の初期化呼び出しで、プッシュ通知サービスへのアクセスをローカルの **Platform** に提供して、サーバー側の MS Graph 通知からアプリがデータを受信できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="ea998-107">Then, the **Platform** initialization call should provide the local **Platform** with access to the push notification service, allowing your app to receive data from the MS Graph Notifications server-side.</span></span> 

### <a name="pass-incoming-push-notifications-to-the-client-sdk"></a><span data-ttu-id="ea998-108">着信プッシュ通知をクライアント SDK に渡す</span><span class="sxs-lookup"><span data-stu-id="ea998-108">Pass incoming push notifications to the client SDK</span></span>
<span data-ttu-id="ea998-109">これで、着信 UserNotification ペイロードを、PushNotificationTrigger に登録された Windows ネイティブのバックグラウンド タスク内で、または [PushNotificationReceived イベント](https://docs.microsoft.com/en-us/uwp/api/windows.networking.pushnotifications.pushnotificationchannel.pushnotificationreceived)のリスナーで処理できます。</span><span class="sxs-lookup"><span data-stu-id="ea998-109">Now, you can handle incoming UserNotification payload inside the Windows native background task registered with PushNotificationTrigger, or in your listner of the [PushNotificationReceived event](https://docs.microsoft.com/en-us/uwp/api/windows.networking.pushnotifications.pushnotificationchannel.pushnotificationreceived).</span></span> 

<span data-ttu-id="ea998-110">コンプライアンス、セキュリティ、潜在的な最適化などの理由から、サーバー側の Graph 通知から受信する WNS 直接通知は、多くの場合、アプリ サーバーによって最初に公開される一切のデータを含まないショルダー タップである可能性があります。</span><span class="sxs-lookup"><span data-stu-id="ea998-110">For reasons including compliance, security, and potential optimizations, the incoming WNS raw notification coming from Graph Notifications server-side could often be a shoulder tap which doesn’t contain any data that is initially published by the app server.</span></span> <span data-ttu-id="ea998-111">アプリ サーバーによって発行された実際の通知内容の取得は、クライアント側の SDK API の背後に隠されています。</span><span class="sxs-lookup"><span data-stu-id="ea998-111">The retrieval of the actual notification content published by app server is hidden behind client-side SDK APIs.</span></span> <span data-ttu-id="ea998-112">この場合、SDK は常に、着信 WNS 直接通知ペイロードを SDK に渡すことをアプリ クライアントに求めます。</span><span class="sxs-lookup"><span data-stu-id="ea998-112">In this case, the SDK always asks the app client to pass the incoming WNS raw notification payload to the SDK.</span></span> <span data-ttu-id="ea998-113">SDK はこれによって、(WNS 直接プッシュがアプリ クライアントによって他の目的にも使用される可能性がある場合に) これが Graph 通知のシナリオ用の通知であるかどうかを判断できます。</span><span class="sxs-lookup"><span data-stu-id="ea998-113">This allows the SDK to determine whether this is a notification for Graph Notifications scenarios or not (in case WNS raw push can also be used by the app client for other purposes).</span></span> 
